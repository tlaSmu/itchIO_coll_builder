#!/bin/bash

# –û—Ç—Ä–∏–º–∞–Ω–Ω—è –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó, –¥–µ –∑–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è —Å–∫—Ä–∏–ø—Ç
SCRIPT_DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" &> /dev/null && pwd )"

# –ü–µ—Ä–µ—Ö—ñ–¥ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—é –ø—Ä–æ–µ–∫—Ç—É
cd "$SCRIPT_DIR"

echo "============================================================"
echo "üìÇ –†–æ–±–æ—á–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—è: $(pwd)"
echo "============================================================"

# --- –ù–û–í–ê –ö–û–ú–ê–ù–î–ê: –ü–ï–†–ï–ú–Ü–®–£–í–ê–ù–ù–Ø –°–ü–ò–°–ö–£ –Ü–ì–û–† ---
if [ -f "itchioGames.txt" ]; then
    echo "üé≤ –ü–µ—Ä–µ–º—ñ—à—É–≤–∞–Ω–Ω—è —Å–ø–∏—Å–∫—É —ñ–≥–æ—Ä (itchioGames.txt)..."
    sort -R itchioGames.txt -o itchioGames.txt
else
    echo "‚ö†Ô∏è  –§–∞–π–ª itchioGames.txt –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ, –ø—Ä–æ–ø—É—Å–∫ –ø–µ—Ä–µ–º—ñ—à—É–≤–∞–Ω–Ω—è."
fi
# -----------------------------------------------

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
if [ -f ".venv/bin/activate" ]; then
    echo "üü¢ –ê–∫—Ç–∏–≤–∞—Ü—ñ—è –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞ (.venv)..."
    source .venv/bin/activate
else
    echo "‚ùå –í—ñ—Ä—Ç—É–∞–ª—å–Ω–µ —Å–µ—Ä–µ–¥–æ–≤–∏—â–µ .venv –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ!"
    echo "   –°—Ç–≤–æ—Ä—ñ—Ç—å –π–æ–≥–æ: python3 -m venv .venv"
    echo "   –¢–∞ –≤—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ: pip install -r requirements.txt"
    read -p "–ù–∞—Ç–∏—Å–Ω—ñ—Ç—å Enter —â–æ–± –≤–∏–π—Ç–∏..."
    exit 1
fi

# –ó–∞–ø—É—Å–∫ Master Process
echo "üöÄ –ó–∞–ø—É—Å–∫ Master Process..."
python3 master_process.py

# –î–µ–∞–∫—Ç–∏–≤–∞—Ü—ñ—è (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ, –±–æ —Å–∫—Ä–∏–ø—Ç –∑–∞–≤–µ—Ä—à—É—î—Ç—å—Å—è)
deactivate

echo ""
echo "============================================================"
read -p "‚úÖ –†–æ–±–æ—Ç—É –∑–∞–≤–µ—Ä—à–µ–Ω–æ. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å Enter —â–æ–± –∑–∞–∫—Ä–∏—Ç–∏..."